# 📕 서블릿   
## 📖 서블릿 탄생 배경    
클라이언트가 서버에게 요청을 보낼때는 `HTTP Message`를 보낸다.           
    
 **HTTP Request Message**
 ```http
 POST /save HTTP/1.1
 Host:localhost:8080
 Content-Type: applcation/x-www-form-urlencoded
 
 username=kim&age=20
 ```
       
이때, 서버에서는       
요청으로 넘어온 `HTTP Message`를 분석해서 아래와 같은 작업을 해야한다.        
       
**서버에서 구현해야할 작업들**    
* 서버 TCP/IP 연결 대기, 소켓 연결     
* HTTP 요청 메시지를 파싱해서 읽기       
* POST 방식, /save URL 인지 확인     
* Content-Type 확인    
* HTTP 메시지 바디 내용 파싱      
    * username, age 데이터를 사용할 수 있게 파싱  
* 저장 프로세스 실행    
* **비즈니스 로직 실행(의미있는 로직)**   
    * **데이터베이스에 저장 요청**       
* HTTP 응답 메시지 생성 시작 
    * HTTP 시작 랑니 생성
    * Header 생성
    * 메시지 바디에 HTML 생성해서 입력 
* TCP/IP에 응답 전달, 소켓 종료    

그런데 아무런 세팅, 준비작업 없이 위 같은 작업을 하고자 한다면?     
매우 귀찮고 번거로운 일을 반복적으로 하게 될 것이다.     
   
### 📖 서버를 직접 구현한다면    

1. 서버에서 TCP/IP 연결을 대기하도록 직접 코드를 작성해야한다.  
2. `HTTP Message`는 서버로 넘어오면서 단순 문자열로 넘어온다.      
   그렇기에 알맞는 분기에 맞추어 데이터를 파싱하는 코드를 작성해야하며       
3. 파싱한 데이터를 통해 알맞는 `HTTP Method` 인지, `URL`인지 검증을 한다.  
4. `Content-type`을 확인하고   
5. `Content-type`에 따라서 `바디 내용 파싱 방식`을 결정하고 파싱한다.          
6. `url`에 맞는 로직을 실행한다. (Controller -> service -> Repository)  
7. 비즈니스 로직을 실행한다. (Repository -> DB,DB에 저장요청)      
8. 비즈니스 로직이 끝나고 반환된 값을 기준으로 `HTTP Response Message`를 작성한다.     
    * HTTP startline 생성
    * HTTP Header 생성
    * HTTP Body 에 데이터 입력 
9. TCP/IP 연결을 종료시킨다.   




      




