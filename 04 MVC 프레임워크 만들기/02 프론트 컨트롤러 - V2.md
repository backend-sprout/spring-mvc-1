02 프론트 컨트롤러 - V2   
=======================         
# V2 구조
![v2](https://user-images.githubusercontent.com/50267433/126652138-455c048f-5377-4c3d-ba19-fb35ab93a5e9.PNG)   

V2 구조는 V1구조에서 View와 관련된 로직을 View 객체로 분리시킨 구조를 가진다.     

**모든 Controller에서 정의된 View 로직**
```java
String viewPath = "/WEB-INF/views/new-form.jsp";
RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
dispatcher.forward(request, response);
```   
모든 Controller들은 로직을 수행한 후 특정 View로 흐름을 이동하기 위해 위와 같은 코드를 작성했다.          
그러나 위와 같은 코드가 모든 Controller에 존재하기에 중복이 발생하고 이로인해 유지보수에 어려움이 생겼다.     
(경로나 형식이 바뀐다면 모든 Controller의 코드를 일일히 수정해줘야 한다는 문제가 발생한다.)                 
    
이를 해결하기 위해, **뷰 관련 로직을 `별도의 객체`로 분리하는 방법을 고안해냈고 이를 활용한게 V2이다.**                 
      
## View 클래스 - View 분리

   
     
```java
public class MyView {
      
    private String viewPath;   
      
    public MyView(String viewPath) {
        this.viewPath = viewPath;
    }
      
    public void render(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```
## ControllerV2 인터페이스  
```java
public interface ControllerV2 {
    MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;
}
```
`ControllerV2` 인터페이스가 `MyView`를 리턴하는 추상 메서드를 정의한다.          
       
## ControllerV2 구현체   
```java
public class MemberFormControllerV2 implements ControllerV2 {
    @Override
    public MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        return new MyView("/WEB-INF/views/new-form.jsp");
    }
}
```



